# å¯¼å…¥æ—¥å¿—ç›‘æ§åº“logfire
import logfire
import asyncio

# å¯¼å…¥ä¸»æ§åˆ¶å™¨
from agents.main_agent import start_video_generation

# é…ç½®logfireæ—¥å¿—ç›‘æ§
logfire.configure()
# å¯¹pydantic_aiè¿›è¡Œç›‘æ§
logfire.instrument_pydantic_ai()


async def main():
    """
    ä¸»å‡½æ•° - AIè§†é¢‘ç”Ÿæˆç³»ç»Ÿå…¥å£
    """
    print("ğŸ¬ æ¬¢è¿ä½¿ç”¨AIè§†é¢‘ç”Ÿæˆç³»ç»Ÿ!")
    print("=" * 50)
    
    # ç¤ºä¾‹å¤§çº² - ç”¨æˆ·å¯ä»¥ä¿®æ”¹è¿™ä¸ªå¤§çº²
    sample_outline = """
    ç¿ èŠ±æ˜¯ä¸€ä¸ªå­¤å„¿ï¼Œç”Ÿæ´»åœ¨ä¸€ä¸ªaé•‡ä¸­ï¼Œå¥¹è¢«ä¸€ä¸ªæ™®é€šäººå®¶æ”¶å…»ã€‚
    ä½†æ˜¯å¥¹çš„çˆ¶æ¯å´ç»å¸¸æ¬ºè´Ÿä»–ï¼Œå¥¹æœ‰ä¸€ä¸ªå§å§ï¼Œå¯¹å¥¹ä¹Ÿå¾ˆè‹›åˆ»ï¼Œä»€ä¹ˆäº‹å„¿éƒ½è®©ç¿ èŠ±æ¥åšã€‚
    å¹¶ä¸”è¿˜å§å§åšäº†ä»€ä¹ˆåäº‹è¿˜è®©ç¿ èŠ±èƒŒé”…ã€‚

    ä½†çªç„¶æœ‰ä¸€å¤©ï¼Œå°é•‡ä¸­çš„å¹´è½»å¯Œå°‘é‡è§äº†ç¿ èŠ±ï¼ŒæƒŠå¥‡çš„å‘ç°ç¿ èŠ±ç«Ÿç„¶å’Œå¥¹å·²æ•…çš„å¦¹å¦¹æœ‰ç€æƒŠäººçš„ç›¸ä¼¼ä¹‹å¤„ã€‚
    åœ¨å¯Œå°‘çš„è°ƒæŸ¥ä¸‹ï¼Œå‘ç°ç¿ èŠ±å…¶å®æ˜¯ä»–çš„äº²å¦¹å¦¹ã€‚
    ä»–ä¹Ÿäº†è§£äº†ç¿ èŠ±çš„å¤„å¢ƒï¼Œä»¥åŠå¥¹åœ¨å…»çˆ¶æ¯å®¶ä¸­æ‰€é­å—çš„è™å¾…ã€‚

    ç¿ èŠ±çš„é€†è¢­ä¹‹è·¯ç”±æ­¤å¼€å§‹ã€‚
    """
    
    # ç”¨æˆ·é…ç½®åŒºåŸŸ
    print("ğŸ“ å½“å‰ä½¿ç”¨çš„æ•…äº‹å¤§çº²:")
    print("-" * 30)
    print(sample_outline)
    print("-" * 30)
    
    # é…ç½®ç”Ÿæˆå‚æ•°
    start_chapter = 1  # å¼€å§‹ç« èŠ‚
    end_chapter = 1    # ç»“æŸç« èŠ‚ï¼ˆå¯ä»¥è®¾ç½®ä¸º3æ¥ç”Ÿæˆæ‰€æœ‰ç« èŠ‚ï¼‰
    
    print("ğŸ¯ ç”Ÿæˆè®¾ç½®:")
    print(f"   å¼€å§‹ç« èŠ‚: ç¬¬{start_chapter}ç« ")
    print(f"   ç»“æŸç« èŠ‚: ç¬¬{end_chapter}ç« ")
    print("=" * 50)
    
    # å¯åŠ¨AIè§†é¢‘ç”Ÿæˆ
    result = await start_video_generation(
        outline=sample_outline,
        start_chapter=start_chapter,
        end_chapter=end_chapter,
        requirement="æƒ…èŠ‚è·Œå®•èµ·ä¼ï¼Œè¦ä½“ç°å‡ºå¤ä»‡çš„çˆ½æ„Ÿï¼Œè¦æœ‰ç”œå® å‰§çš„é£æ ¼å’Œé€†è¢­å‰§çš„é£æ ¼ï¼Œè¿™ä¸ªå‰§æƒ…çš„å—ä¼—ç¾¤ä½“æ˜¯å¥³æ€§ï¼Œè¯·ç»“åˆè¿™äº›è¦ç´ è¿›è¡Œç”Ÿæˆã€‚"
    )
    
    print("\n" + "=" * 50)
    print("ğŸ“‹ ç”Ÿæˆç»“æœ:")
    print(result)
    print("=" * 50)


if __name__ == "__main__":
    asyncio.run(main())
